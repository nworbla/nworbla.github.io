{
  "hash": "de279f97ed7ac67fc25c830f4d4cfdb0",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Pandas groupby() Simplified: A Quick, Practical Guide\"\nformat: html\nexecute:\n  echo: true\n---\n\n## Introduction\n\nSuppose we want to calculate the total sales of an item per store. Or the average price per product category rather than the average price overall. In data analysis, we often want to group by category to summarize our data. \n\nThe pandas groupby() function allows us to do just that. \n\nThe groupby() function is designed to split data by category or groups based on one or more coloumns and compute summary statitics based on those groups. When called by itself, the output does not look meaningful, which may seem confusing at first. However, adding a simple function and even resetting the index can prove groupby() to be a powerful pandas tool. \n\nIn this tutorial, we'll walk through the simple ways we can use groupby() effectively using a dataset of cereal prices and sugar content from two different stores. \n\n::: {#f2dd5fc5 .cell execution_count=1}\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Cereal</th>\n      <th>Store</th>\n      <th>Brand_type</th>\n      <th>Price</th>\n      <th>Sugar_grams</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Frosted Flakes</td>\n      <td>Walmart</td>\n      <td>name brand</td>\n      <td>4.29</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Cheerios</td>\n      <td>Walmart</td>\n      <td>name brand</td>\n      <td>3.99</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Lucky Charms</td>\n      <td>Walmart</td>\n      <td>name brand</td>\n      <td>4.59</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Raisin Bran</td>\n      <td>Walmart</td>\n      <td>name brand</td>\n      <td>5.49</td>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Corn Flakes</td>\n      <td>Target</td>\n      <td>name brand</td>\n      <td>3.49</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Honey Nut Oats</td>\n      <td>Target</td>\n      <td>generic</td>\n      <td>2.79</td>\n      <td>8</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Granola Crunch</td>\n      <td>Target</td>\n      <td>generic</td>\n      <td>3.19</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Cocoa Puffs</td>\n      <td>Target</td>\n      <td>name brand</td>\n      <td>4.39</td>\n      <td>13</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Basic Syntax\n\nTo categorize your data by a certain variable, call the groupby function on your data frame with the variable column name as your argument. When you call groupby(), pandas creates groups based on the unique values of that column. Those grouped values become the index of the summarized result after a function is applied.\n\n::: {#e590fdaf .cell execution_count=2}\n``` {.python .cell-code}\ndf.groupby(\"Store\")\n```\n:::\n\n\nNext, add a call to a function. The format of the code below will apply the function to all other variables grouped by the groupby variable. Adding only a function, as below, may raise an error if some of the other columns contain string values. Note that max() and min() will provide the first and last alphabetically respectively for string values. \n\n::: {#3c462b17 .cell execution_count=3}\n``` {.python .cell-code}\ndf.groupby(\"Store\").mean()\n```\n:::\n\n\nTo get the result of a single column/variable, place it in brackets after the groupby variable(s) and apply the function at the end. \n\ndf.groupby(\"Store\")[\"Price\"].mean()\n```\n\n## Common Aggregations\n\nHere are some of the most common functions used with groupby():  \n\n- mean() - average \n- sum() - total \n- max() - maximun value \n- min() - minimum value\n- count() - number of observations\n\n## Grouping by Multiple Columns\n\nYou can groupby multiple columns/variable. This will create an index of all unique combinations of the groupby variables. \n\n```{python}\ndf.groupby([\"Store\", \"Brand_type\"])[\"Price\"].mean()\n```\n\n## Using .agg() for Multiple Functions\n\nIf you are interested in more than one summary, you can use the aggregate agg() function, which allows you to apply more than one function to your variable of interest. With one variable of interest, the argument for agg() will be a list of functions typed as strings. \n\n```{python}\ndf.groupby(\"Store\")[\"Price\"].agg([\"mean\", \"min\", \"max\", \"count\"])\n```\n\nIf you intend to apply different or additional functions to distinct variables of interest, the argument should be a dictionary with the variable/column names as the keys with the functions you wish to apply as the values as shown below. If applying multiple functions to a variable, the functions must be contained in a list as the dictionary value. \n\n```{python}\ndf.groupby(\"Store\").agg({\n    \"Price\": [\"mean\", \"max\"],\n    \"Sugar_grams\": \"mean\"\n})\n```\n\nIf you wanted to apply the same function to multiple variables, you could simply provide a list of variable names. \n\n```{python}\ndf.groupby(\"Store\")[[\"Price\", \"Sugar_grams\"]].mean()\n```\n\n## Resetting the Index\n\nAfter grouping, the grouped variable becomes the index. If you want it to remain a regular column, you can use reset_index().\n\n```{python}\ndf.groupby(\"Store\")[\"Price\"].mean().reset_index()\n```\n\n## Conclusion and Next Steps \n\nThis tutorial covered only the basics of the pandas groupby function. Yet, even the simplest uses of groupby() can effectively answer the most common data analysis questions. \n\nNow it's your turn to apply groupby() to some data. \n\n",
    "supporting": [
      "blog_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}